<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0042)http://www.cnblogs.com/mzws/p/redis-2.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/analytics.js"></script>

<title>C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园</title>
<link type="text/css" rel="stylesheet" href="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/bundle-Autumn.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/mzws/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/mzws/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/mzws/wlwmanifest.xml">
<script type="text/javascript" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/encoder.js"></script><script src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'mzws', cb_enable_mathjax=false;</script>
<script src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/blog-common.js" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<table cellspacing="0" cellpadding="0" width="100%" border="0" class="banner" height="250" background="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/bg_banner.jpg">
        <tbody><tr>
            <td width="61">
                &nbsp;
            </td>
            <td width="236" align="center">
                
<br><br><br><br><br><br><br>
<div id="header">
	<span>
		<a id="Header1_HeaderTitle" href="http://www.cnblogs.com/mzws/">张文书</a><br><br>
		
	</span>
</div>
            </td>
            <td style="padding-bottom: 30px" align="center" valign="bottom">
                &nbsp;
            </td>
        </tr>
</tbody></table>
<table align="center" width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody><tr>
        <td width="60">
            &nbsp;
        </td>
        <td width="180" valign="top" style="border-left: solid 1px #CCCCCC; border-right: solid 1px #CCCCCC">
            <table align="center" width="100%" height="1400" cellspacing="0" cellpadding="5" border="0" bgcolor="white">
                <tbody><tr>
                    <td class="banner" valign="top" style="padding-top: 0px">
                        
                            
<div class="news"><div id="blog-news"><div id="profile_block">昵称：<a href="http://home.cnblogs.com/u/mzws/">张文书</a><br>园龄：<a href="http://home.cnblogs.com/u/mzws/" title="入园时间：2012-06-06">3年3个月</a><br>粉丝：<a href="http://home.cnblogs.com/u/mzws/followers/">30</a><br>关注：<a href="http://home.cnblogs.com/u/mzws/followees/">4</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="cnblogs.UserManager.FollowBlogger(&#39;c7686520-8caf-e111-aa3f-842b2b196315&#39;)">+加关注</a></div></div></div><script type="text/javascript">loadBlogNews();</script></div>

                            <div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>
<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="http://www.cnblogs.com/mzws/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="http://www.cnblogs.com/mzws/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="http://www.cnblogs.com/mzws/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="http://www.cnblogs.com/mzws/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="http://www.cnblogs.com/mzws/tag/" title="我的博客的标签列表">我的标签</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">

</div></div><div id="sidebar_toptags" class="sidebar-block">
<h3 class="catListTitle">我的标签</h3>
<div id="MyTag">
<ul>
<li><a href="http://www.cnblogs.com/mzws/tag/jQuery%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/">jQuery插件开发</a>(3)</li><li><a href="http://www.cnblogs.com/mzws/tag/Jquery%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6/">Jquery 自定义控件</a>(2)</li><li><a href="http://www.cnblogs.com/mzws/tag/jquery%E6%93%8D%E4%BD%9Ctable%E5%88%97/">jquery操作table列</a>(1)</li><li><a href="http://www.cnblogs.com/mzws/tag/jquery%E6%93%8D%E4%BD%9Ctable%E8%A1%8C/">jquery操作table行</a>(1)</li><li><a href="http://www.cnblogs.com/mzws/tag/Jquery%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E5%9B%BE%E7%89%87/">Jquery延迟加载图片</a>(1)</li><li><a href="http://www.cnblogs.com/mzws/tag/Jquery%E9%A2%84%E5%8A%A0%E8%BD%BD%E5%9B%BE%E7%89%87/">Jquery预加载图片</a>(1)</li><li><a href="http://www.cnblogs.com/mzws/tag/js%E9%97%AD%E5%8C%85/">js闭包</a>(1)</li><li><a href="http://www.cnblogs.com/mzws/tag/js%E5%80%92%E8%AE%A1%E6%97%B6%E6%8F%92%E4%BB%B6/">js倒计时插件</a>(1)</li><li><a href="http://www.cnblogs.com/mzws/tag/JS%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5%E6%8E%A7%E4%BB%B6%E4%BD%8D%E7%BD%AE/">JS获取网页控件位置</a>(1)</li><li><a href="http://www.cnblogs.com/mzws/tag/Spring/">Spring</a>(1)</li><li><a href="http://www.cnblogs.com/mzws/tag/">更多</a></li>
</ul>
</div></div><div id="sidebar_categories">
		<h1 class="listtitle">随笔分类</h1>
		
				<ul class="list">
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_0" class="listitem" href="http://www.cnblogs.com/mzws/category/618123.html">ASP.NET MVC系列(1)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_1" class="listitem" href="http://www.cnblogs.com/mzws/category/637863.html">C# Redis 学习系列(2)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_2" class="listitem" href="http://www.cnblogs.com/mzws/category/637857.html">C# 系列(6)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_3" class="listitem" href="http://www.cnblogs.com/mzws/category/618124.html">DDD初探系列</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_4" class="listitem" href="http://www.cnblogs.com/mzws/category/618125.html">DIV+CSS 前端样式系列(1)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_5" class="listitem" href="http://www.cnblogs.com/mzws/category/618122.html">jquery、Js系列(5)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_6" class="listitem" href="http://www.cnblogs.com/mzws/category/614650.html">JQuery插件开发系列(8)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_7" class="listitem" href="http://www.cnblogs.com/mzws/category/618126.html">生活随感(1)</a> </li>
			
				</ul>
			
	
		<h1 class="listtitle">随笔档案</h1>
		
				<ul class="list">
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_0" class="listitem" href="http://www.cnblogs.com/mzws/archive/2015/09.html">2015年9月 (1)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_1" class="listitem" href="http://www.cnblogs.com/mzws/archive/2015/06.html">2015年6月 (1)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_2" class="listitem" href="http://www.cnblogs.com/mzws/archive/2015/01.html">2015年1月 (2)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_3" class="listitem" href="http://www.cnblogs.com/mzws/archive/2014/12.html">2014年12月 (3)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_4" class="listitem" href="http://www.cnblogs.com/mzws/archive/2014/10.html">2014年10月 (1)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_5" class="listitem" href="http://www.cnblogs.com/mzws/archive/2014/09.html">2014年9月 (1)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_6" class="listitem" href="http://www.cnblogs.com/mzws/archive/2014/06.html">2014年6月 (3)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_7" class="listitem" href="http://www.cnblogs.com/mzws/archive/2014/05.html">2014年5月 (2)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_8" class="listitem" href="http://www.cnblogs.com/mzws/archive/2014/04.html">2014年4月 (2)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_9" class="listitem" href="http://www.cnblogs.com/mzws/archive/2014/03.html">2014年3月 (4)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_10" class="listitem" href="http://www.cnblogs.com/mzws/archive/2014/02.html">2014年2月 (1)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_11" class="listitem" href="http://www.cnblogs.com/mzws/archive/2013/08.html">2013年8月 (2)</a> </li>
			
				<li class="listitem"><a id="CatList_LinkList_1_Link_12" class="listitem" href="http://www.cnblogs.com/mzws/archive/2013/05.html">2013年5月 (1)</a> </li>
			
				</ul>
			
	
</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<h3 class="catListTitle">最新评论</h3>
<div class="RecentComment" id="RecentComments">
	<div id="RecentCommentsBlock"><ul>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/mzws/p/redis-2.html#3264322">1. Re:C#中使用Redis学习二 在.NET4.5中使用redis hash操作</a></li>
    <li class="recent_comment_body">真的好厉害的感觉，虽然我还是小白，看不太懂。</li>
    <li class="recent_comment_author">--小屈</li>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/mzws/p/citylinkage.html#3262928">2. Re:Jquery 插件开发——citylinkage（省、市、县城市联动选择）</a></li>
    <li class="recent_comment_body">mark</li>
    <li class="recent_comment_author">--EcitGis</li>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/mzws/p/citylinkage.html#3262867">3. Re:Jquery 插件开发——citylinkage（省、市、县城市联动选择）</a></li>
    <li class="recent_comment_body">不错，收藏了</li>
    <li class="recent_comment_author">--失落的野火</li>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/mzws/p/citylinkage.html#3262544">4. Re:Jquery 插件开发——citylinkage（省、市、县城市联动选择）</a></li>
    <li class="recent_comment_body">我用过一个js的联动，数据都在js里写，也不错</li>
    <li class="recent_comment_author">--圣之贤者</li>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/mzws/p/citylinkage.html#3262304">5. Re:Jquery 插件开发——citylinkage（省、市、县城市联动选择）</a></li>
    <li class="recent_comment_body">妥妥的厉害</li>
    <li class="recent_comment_author">--小土坑</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<h3 class="catListTitle">阅读排行榜</h3>
<div class="RecentComment" id="TopViewPosts"> 
	<div id="TopViewPostsBlock"><ul><li><a href="http://www.cnblogs.com/mzws/p/citylinkage.html">1. Jquery 插件开发——citylinkage（省、市、县城市联动选择）(1610)</a></li><li><a href="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园.html">2. C#中使用Redis学习二 在.NET4.5中使用redis hash操作(1353)</a></li><li><a href="http://www.cnblogs.com/mzws/p/redis1.html">3. C#中使用Redis学习一 windows安装redis服务器端和客户端(971)</a></li><li><a href="http://www.cnblogs.com/mzws/p/LazyLoadImg.html">4. jQuery 插件开发——LazyLoadImg（预加载和延迟加载图片)(888)</a></li><li><a href="http://www.cnblogs.com/mzws/p/datagrid.html">5. jQuery 插件开发——GridData（表格）第二版(834)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<h3 class="catListTitle">评论排行榜</h3>
<div class="RecentComment" id="TopCommentsPosts">
	<div id="TopFeedbackPostsBlock"><ul><li><a href="http://www.cnblogs.com/mzws/p/citylinkage.html">1. Jquery 插件开发——citylinkage（省、市、县城市联动选择）(20)</a></li><li><a href="http://www.cnblogs.com/mzws/p/LazyLoadImg.html">2. jQuery 插件开发——LazyLoadImg（预加载和延迟加载图片)(10)</a></li><li><a href="http://www.cnblogs.com/mzws/p/redis1.html">3. C#中使用Redis学习一 windows安装redis服务器端和客户端(9)</a></li><li><a href="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园.html">4. C#中使用Redis学习二 在.NET4.5中使用redis hash操作(6)</a></li><li><a href="http://www.cnblogs.com/mzws/p/pagging.html">5. JS 插件开发——Pagging(分页控件)(6)</a></li></ul></div>
</div></div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<h3 class="catListTitle">推荐排行榜</h3>
<div class="RecentComment">
	<div id="TopDiggPostsBlock"><ul><li><a href="http://www.cnblogs.com/mzws/p/citylinkage.html">1. Jquery 插件开发——citylinkage（省、市、县城市联动选择）(12)</a></li><li><a href="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园.html">2. C#中使用Redis学习二 在.NET4.5中使用redis hash操作(5)</a></li><li><a href="http://www.cnblogs.com/mzws/p/pagging.html">3. JS 插件开发——Pagging(分页控件)(4)</a></li><li><a href="http://www.cnblogs.com/mzws/p/menu.html">4. jQuery 插件开发——Menu（导航菜单）(4)</a></li><li><a href="http://www.cnblogs.com/mzws/p/LazyLoadImg.html">5. jQuery 插件开发——LazyLoadImg（预加载和延迟加载图片)(3)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
                        
                        <br>
                        <center>
                            Powered by: <a href="http://www.cnblogs.com/">博客园</a><br>
                            模板提供：<a href="http://blog.hjenglish.com/">沪江博客</a>
                        </center>
                    </td>
                </tr>
            </tbody></table>
        </td>
        <td valign="top" style="padding: 0">
            <table align="center" width="100%" height="1400" cellspacing="0" cellpadding="5" border="0" bgcolor="white" class="index">
                <tbody><tr>
                    <td class="banner" valign="top">
                        <center>
                            <a id="MyLinks1_HomeLink" class="menu" href="http://www.cnblogs.com/">博客园</a> | 
<a id="MyLinks1_MyHomeLink" class="menu" href="http://www.cnblogs.com/mzws/">首页</a> | 
<a id="MyLinks1_NewPostLink" class="menu" rel="nofollow" href="http://i.cnblogs.com/EditPosts.aspx?opt=1">发新随笔</a> | 
<a id="MyLinks1_NewArticleLink" class="menu" href="http://www.cnblogs.com/EnterMyBlog.aspx?NewArticle=1">发新文章</a> | 
<a id="MyLinks1_ContactLink" accesskey="9" class="menu" rel="nofollow" href="http://msg.cnblogs.com/send/%E5%BC%A0%E6%96%87%E4%B9%A6">联系</a> | 
<a id="MyLinks1_Syndication" class="menu" href="http://www.cnblogs.com/mzws/rss">订阅</a><a id="MyLinks1_XMLLink" href="http://www.cnblogs.com/mzws/rss"><img src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/xml.gif" alt="订阅"></a> | 
<a id="MyLinks1_Admin" class="menu" rel="nofollow" href="http://i.cnblogs.com/">管理</a>

                        </center>
                        
<div id="post_detail">
<div class="block">
	<h1 class="block_title"><a id="cb_post_title_url" href="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园.html">C#中使用Redis学习二 在.NET4.5中使用redis hash操作</a></h1>
	<div class="post">
		<div class="postcontent">
			<div id="cnblogs_post_body"><p><span style="text-decoration: underline;"><span style="color: #ff0000; text-decoration: underline;"><strong><a title="C#中使用Redis学习一 windows安装redis服务器端和客户端" href="http://www.cnblogs.com/mzws/p/redis1.html" target="_blank"><span style="color: #ff0000; text-decoration: underline;">上一篇&gt;&gt;</span></a></strong></span></span></p>
<p><span style="color: #258fb8;"><strong><span style="font-size: 18pt;">摘要</span></strong></span></p>
<hr>
<p>&nbsp;　　<span style="color: #000000;">上一篇讲述了安装redis客户端和服务器端，也大体地介绍了一下redis。本篇着重讲解.NET4.0 和 .NET4.5中如何使用redis和C# redis操作哈希表。并且会将封装的一些代码贴一下。在讲解的过程中，我打算结合redis操作命令一起叙述，算是作为对比吧。这样也能让读者清楚了 解，所分装的代码对应的redis的哪一些操作命令。<br></span></p>
<p>&nbsp; <span style="color: #258fb8;"><strong><span style="font-size: 18pt;">hash哈希表简介</span></strong> </span></p>
<hr>
<p><span style="color: #000000;"><strong>　　</strong>这里仅仅是对哈希表作简单概念级介绍(摘自csdn),如果需要，自己去研究。</span></p>
<p><span style="color: #000000;"><strong>1、哈希表的概念</strong></span></p>
<p><span style="color: #000000;">　　哈希表(Hash Table)也叫散列表，是根据关键码值（Key Value）而<strong>直接进行访问的数据结构</strong>。它通过把关键码值映射到哈希表中的一个位置来访问记录，以<strong>加快查找的速度</strong>。这个映射函数就做散列函数，存放记录的数组叫做散列表。</span></p>
<p><span style="color: #000000;"><strong>2、哈希表查找的时间复杂度</strong></span></p>
<p><span style="color: #000000;">　　哈希表存储的是键值对，其查找的时间复杂度与元素数量多少无关，哈希表在查找元素时是<strong>通过计算哈希码值来定位元素的位置</strong>从而直接访问元素的，因此，哈希表查找的时间复杂度为O（1）。</span></p>
<p><span style="color: #258fb8;"><strong><span style="font-size: 18pt;">如何在.NET4.0/4.5中安装redis组件？</span></strong> </span></p>
<hr>
<p><span style="color: #000000;">　　在上一篇博文中，安装好的redis服务器端，要记得开启服务。然后再在.NET4.5（.NET4.0同理）项目中添加对redis操作的dll文件的引用。引用的步骤如下：</span></p>
<p><span style="color: #000000;">第一步：右键项目中的引用，选择“管理NuGet程序包”；</span></p>
<p><span style="color: #000000;">第二步：在搜索栏中输入“Redis client for the Redis NoSQL DB”，联机查找；如下图：</span></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/061047197345402.jpg" alt=""></p>
<p><span style="color: #000000;">　　联机搜索结构中的第一个（如上图红色区域的组件，其版本号为<span>4.0.35）就是要安装的组件了。接下来我们就继续点击“安装”按钮，进入下载组件，等下载完成后，继续选择“接受条款”，然后继续安装。安装过程中会出现下图情况：</span></span></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/061050244371108.jpg" alt=""></p>
<p><span style="color: #000000;">　
　这句红色错误的意思是我们安装的ServiceStack.Interfaces 
4.0.35版本与当前的.NET4.5框架中组件不兼容。这说明我们需要降低或是提高.NET版本解决此问题。我安装的是.NET4.5，所以我只能降
低版本。降低.NET版本的方法大家应该都知道的。我就在累述一次，希望大家不要嫌烦，毕竟还有新手在。方法：右键项目文件选择“属性”==》“应用程
序”==》“目标框架”，然后选择各个版本去尝试之前的两步操作，直到可以安装为止。</span></p>
<p><span style="color: #000000;">　
　我试过了，.NET4.0也会遇到同样问题，直到.NET3.5才可以。当然此时安装的ServiceStack.Interfaces 
版本是1.0.0.0 
，这样我们再把.NET版本恢复4.5即可使用了。，其实是变相在.NET4.0/4.5下使用redis客户端。不知道各位有没有遇到这样的问题，还是
直接拷贝别人的dll文件。当自己亲自去操作的时候，才会发现，其实就算是安装一个组件都可能会出现各种各样的问题。所以，要想了解全过程的话，我们还是
要身体力行的啊。好了，这样就说明在.NET4.5下安装好了redis client了。</span></p>
<p><span style="color: #258fb8;"><strong><span style="font-size: 18pt;">实战：在项目中运用redis代码详解</span></strong></span></p>
<hr>
<p><span style="color: #000000;">　　这部分主要是讲解怎样连接到redis服务器。其中包含很多配置，我就用代码去说明一切了。配置文件如下代码：</span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1  &lt;configSections&gt;
<span style="color: #008080;">2     &lt;section name=<span style="color: #800000;">"<span style="color: #800000;">RedisConfig<span style="color: #800000;">" type=<span style="color: #800000;">"<span style="color: #800000;">RedisDemo.Common.Redis.RedisConfigInfo, RedisDemo<span style="color: #800000;">"/&gt;
<span style="color: #008080;">3  &lt;/configSections&gt;
<span style="color: #008080;">4  &lt;RedisConfig WriteServerList=<span style="color: #800000;">"<span style="color: #800000;">127.0.0.1:6379<span style="color: #800000;">" ReadServerList=<span style="color: #800000;">"<span style="color: #800000;">127.0.0.1:6379<span style="color: #800000;">" MaxWritePoolSize=<span style="color: #800000;">"<span style="color: #800000;">60<span style="color: #800000;">"<br> 　 MaxReadPoolSize=<span style="color: #800000;">"<span style="color: #800000;">60<span style="color: #800000;">" AutoStart=<span style="color: #800000;">"<span style="color: #800000;">true<span style="color: #800000;">" LocalCacheTime=<span style="color: #800000;">"<span style="color: #800000;">180<span style="color: #800000;">" RecordeLog=<span style="color: #800000;">"<span style="color: #800000;">false<span style="color: #800000;">"/&gt;
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<p><span style="color: #000000;">　　在这里对RedisConfig这段配置文件的属性作下说明。</span></p>
<p><span style="font-family: 宋体; font-size: 14px; color: #000000;"><strong>　　WriteServerList</strong>：可写的Redis链接地址。</span></p>
<p><span style="font-family: 宋体; font-size: 14px; color: #000000;"><strong>　　ReadServerList</strong>：可读的Redis链接地址。</span></p>
<p><span style="font-family: 宋体; font-size: 14px; color: #000000;"><strong>　　MaxWritePoolSize</strong>：最大写链接数。</span></p>
<p><span style="font-family: 宋体; font-size: 14px; color: #000000;"><strong>　　MaxReadPoolSize</strong>：最大读链接数。</span></p>
<p><span style="font-family: 宋体; font-size: 14px; color: #000000;"><strong>　　AutoStart</strong>：自动重启。</span></p>
<p><span style="font-family: 宋体; font-size: 14px; color: #000000;"><strong>　　LocalCacheTime</strong>：本地缓存到期时间，单位:秒。</span></p>
<p><span style="font-family: 宋体; font-size: 14px; color: #000000;"><strong>　　RecordeLog</strong>：是否记录日志,该设置仅用于排查redis运行时出现的问题,如redis工作正常,请关闭该项。</span></p>
<p><span style="color: #000000;">　　RedisConfigInfo类是记录redis连接信息，此信息和配置文件中的RedisConfig相呼应。cs代码如下：（这段代码不是我自己写的，但是我觉得应该这样设计。所以，copy了一下别人的代码。）</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;0a9dc1ce-1be3-415f-a116-3b5062a53872&#39;)"><img id="code_img_closed_0a9dc1ce-1be3-415f-a116-3b5062a53872" class="code_img_closed" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_0a9dc1ce-1be3-415f-a116-3b5062a53872" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;0a9dc1ce-1be3-415f-a116-3b5062a53872&#39;,event)" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_0a9dc1ce-1be3-415f-a116-3b5062a53872" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008080;">  1</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Configuration;
</span><span style="color: #008080;">  2</span> 
<span style="color: #008080;">  3</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> RedisDemo.Common.Redis
</span><span style="color: #008080;">  4</span> <span style="color: #000000;">{
</span><span style="color: #008080;">  5</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">sealed</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> RedisConfigInfo : ConfigurationSection
</span><span style="color: #008080;">  6</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">  7</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> RedisConfigInfo GetConfig()
</span><span style="color: #008080;">  8</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">  9</span>             <span style="color: #0000ff;">var</span> section = (RedisConfigInfo)ConfigurationManager.GetSection(<span style="color: #800000;">"</span><span style="color: #800000;">RedisConfig</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 10</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> section;
</span><span style="color: #008080;"> 11</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 12</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> RedisConfigInfo GetConfig(<span style="color: #0000ff;">string</span><span style="color: #000000;"> sectionName)
</span><span style="color: #008080;"> 13</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 14</span>             <span style="color: #0000ff;">var</span> section = (RedisConfigInfo)ConfigurationManager.GetSection(<span style="color: #800000;">"</span><span style="color: #800000;">RedisConfig</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 15</span>             <span style="color: #0000ff;">if</span> (section == <span style="color: #0000ff;">null</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 16</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 17</span>                 <span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span> ConfigurationErrorsException(<span style="color: #800000;">"</span><span style="color: #800000;">Section </span><span style="color: #800000;">"</span> + sectionName + <span style="color: #800000;">"</span><span style="color: #800000;"> is not found.</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 18</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 19</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> section;
</span><span style="color: #008080;"> 20</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 21</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 22</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 可写的Redis链接地址
</span><span style="color: #008080;"> 23</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 24</span>         [ConfigurationProperty(<span style="color: #800000;">"</span><span style="color: #800000;">WriteServerList</span><span style="color: #800000;">"</span>, IsRequired = <span style="color: #0000ff;">false</span><span style="color: #000000;">)]
</span><span style="color: #008080;"> 25</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span><span style="color: #000000;"> WriteServerList
</span><span style="color: #008080;"> 26</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 27</span>             <span style="color: #0000ff;">get</span>
<span style="color: #008080;"> 28</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 29</span>                 <span style="color: #0000ff;">return</span> (<span style="color: #0000ff;">string</span>)<span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">WriteServerList</span><span style="color: #800000;">"</span><span style="color: #000000;">];
</span><span style="color: #008080;"> 30</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 31</span>             <span style="color: #0000ff;">set</span>
<span style="color: #008080;"> 32</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 33</span>                 <span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">WriteServerList</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> value;
</span><span style="color: #008080;"> 34</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 35</span> <span style="color: #000000;">        }        
</span><span style="color: #008080;"> 36</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 37</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 可读的Redis链接地址
</span><span style="color: #008080;"> 38</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 39</span>         [ConfigurationProperty(<span style="color: #800000;">"</span><span style="color: #800000;">ReadServerList</span><span style="color: #800000;">"</span>, IsRequired = <span style="color: #0000ff;">false</span><span style="color: #000000;">)]
</span><span style="color: #008080;"> 40</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span><span style="color: #000000;"> ReadServerList
</span><span style="color: #008080;"> 41</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 42</span>             <span style="color: #0000ff;">get</span>
<span style="color: #008080;"> 43</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 44</span>                 <span style="color: #0000ff;">return</span> (<span style="color: #0000ff;">string</span>)<span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">ReadServerList</span><span style="color: #800000;">"</span><span style="color: #000000;">];
</span><span style="color: #008080;"> 45</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 46</span>             <span style="color: #0000ff;">set</span>
<span style="color: #008080;"> 47</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 48</span>                 <span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">ReadServerList</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> value;
</span><span style="color: #008080;"> 49</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 50</span> <span style="color: #000000;">        }        
</span><span style="color: #008080;"> 51</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 52</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 最大写链接数
</span><span style="color: #008080;"> 53</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 54</span>         [ConfigurationProperty(<span style="color: #800000;">"</span><span style="color: #800000;">MaxWritePoolSize</span><span style="color: #800000;">"</span>, IsRequired = <span style="color: #0000ff;">false</span>, DefaultValue = <span style="color: #800080;">5</span><span style="color: #000000;">)]
</span><span style="color: #008080;"> 55</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> MaxWritePoolSize
</span><span style="color: #008080;"> 56</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 57</span>             <span style="color: #0000ff;">get</span>
<span style="color: #008080;"> 58</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 59</span>                 <span style="color: #0000ff;">var</span> maxWritePoolSize = (<span style="color: #0000ff;">int</span>)<span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">MaxWritePoolSize</span><span style="color: #800000;">"</span><span style="color: #000000;">];
</span><span style="color: #008080;"> 60</span>                 <span style="color: #0000ff;">return</span> maxWritePoolSize &gt; <span style="color: #800080;">0</span> ? maxWritePoolSize : <span style="color: #800080;">5</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 61</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 62</span>             <span style="color: #0000ff;">set</span>
<span style="color: #008080;"> 63</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 64</span>                 <span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">MaxWritePoolSize</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> value;
</span><span style="color: #008080;"> 65</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 66</span> <span style="color: #000000;">        }        
</span><span style="color: #008080;"> 67</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 68</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 最大读链接数
</span><span style="color: #008080;"> 69</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 70</span>         [ConfigurationProperty(<span style="color: #800000;">"</span><span style="color: #800000;">MaxReadPoolSize</span><span style="color: #800000;">"</span>, IsRequired = <span style="color: #0000ff;">false</span>, DefaultValue = <span style="color: #800080;">5</span><span style="color: #000000;">)]
</span><span style="color: #008080;"> 71</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> MaxReadPoolSize
</span><span style="color: #008080;"> 72</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 73</span>             <span style="color: #0000ff;">get</span>
<span style="color: #008080;"> 74</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 75</span>                 <span style="color: #0000ff;">var</span> maxReadPoolSize = (<span style="color: #0000ff;">int</span>)<span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">MaxReadPoolSize</span><span style="color: #800000;">"</span><span style="color: #000000;">];
</span><span style="color: #008080;"> 76</span>                 <span style="color: #0000ff;">return</span> maxReadPoolSize &gt; <span style="color: #800080;">0</span> ? maxReadPoolSize : <span style="color: #800080;">5</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 77</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 78</span>             <span style="color: #0000ff;">set</span>
<span style="color: #008080;"> 79</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 80</span>                 <span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">MaxReadPoolSize</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> value;
</span><span style="color: #008080;"> 81</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 82</span> <span style="color: #000000;">        }        
</span><span style="color: #008080;"> 83</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 84</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 自动重启
</span><span style="color: #008080;"> 85</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 86</span>         [ConfigurationProperty(<span style="color: #800000;">"</span><span style="color: #800000;">AutoStart</span><span style="color: #800000;">"</span>, IsRequired = <span style="color: #0000ff;">false</span>, DefaultValue = <span style="color: #0000ff;">true</span><span style="color: #000000;">)]
</span><span style="color: #008080;"> 87</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">bool</span><span style="color: #000000;"> AutoStart
</span><span style="color: #008080;"> 88</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 89</span>             <span style="color: #0000ff;">get</span>
<span style="color: #008080;"> 90</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 91</span>                 <span style="color: #0000ff;">return</span> (<span style="color: #0000ff;">bool</span>)<span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">AutoStart</span><span style="color: #800000;">"</span><span style="color: #000000;">];
</span><span style="color: #008080;"> 92</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 93</span>             <span style="color: #0000ff;">set</span>
<span style="color: #008080;"> 94</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 95</span>                 <span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">AutoStart</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> value;
</span><span style="color: #008080;"> 96</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 97</span> <span style="color: #000000;">        }        
</span><span style="color: #008080;"> 98</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 99</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 本地缓存到期时间，单位:秒
</span><span style="color: #008080;">100</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">101</span>         [ConfigurationProperty(<span style="color: #800000;">"</span><span style="color: #800000;">LocalCacheTime</span><span style="color: #800000;">"</span>, IsRequired = <span style="color: #0000ff;">false</span>, DefaultValue = <span style="color: #800080;">36000</span><span style="color: #000000;">)]
</span><span style="color: #008080;">102</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> LocalCacheTime
</span><span style="color: #008080;">103</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">104</span>             <span style="color: #0000ff;">get</span>
<span style="color: #008080;">105</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">106</span>                 <span style="color: #0000ff;">return</span> (<span style="color: #0000ff;">int</span>)<span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">LocalCacheTime</span><span style="color: #800000;">"</span><span style="color: #000000;">];
</span><span style="color: #008080;">107</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">108</span>             <span style="color: #0000ff;">set</span>
<span style="color: #008080;">109</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">110</span>                 <span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">LocalCacheTime</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> value;
</span><span style="color: #008080;">111</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">112</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">113</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">114</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 是否记录日志,该设置仅用于排查redis运行时出现的问题,如redis工作正常,请关闭该项
</span><span style="color: #008080;">115</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">116</span>         [ConfigurationProperty(<span style="color: #800000;">"</span><span style="color: #800000;">RecordeLog</span><span style="color: #800000;">"</span>, IsRequired = <span style="color: #0000ff;">false</span>, DefaultValue = <span style="color: #0000ff;">false</span><span style="color: #000000;">)]
</span><span style="color: #008080;">117</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">bool</span><span style="color: #000000;"> RecordeLog
</span><span style="color: #008080;">118</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">119</span>             <span style="color: #0000ff;">get</span>
<span style="color: #008080;">120</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">121</span>                 <span style="color: #0000ff;">return</span> (<span style="color: #0000ff;">bool</span>)<span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">RecordeLog</span><span style="color: #800000;">"</span><span style="color: #000000;">];
</span><span style="color: #008080;">122</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">123</span>             <span style="color: #0000ff;">set</span>
<span style="color: #008080;">124</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">125</span>                 <span style="color: #0000ff;">base</span>[<span style="color: #800000;">"</span><span style="color: #800000;">RecordeLog</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> value;
</span><span style="color: #008080;">126</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">127</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">128</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">129</span> }</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">RedisConfigInfo 类</span></div>
<p>&nbsp;<span style="color: #000000;">　　RedisManager类主要是创建链接池管理对象的。</span> </p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;35e80375-4aff-4ca1-89bc-7863b64bac4c&#39;)"><img id="code_img_closed_35e80375-4aff-4ca1-89bc-7863b64bac4c" class="code_img_closed" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_35e80375-4aff-4ca1-89bc-7863b64bac4c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;35e80375-4aff-4ca1-89bc-7863b64bac4c&#39;,event)" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_35e80375-4aff-4ca1-89bc-7863b64bac4c" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Linq;
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> ServiceStack.Redis;
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Collections.Generic;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> RedisDemo.Common.Redis
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> RedisManager
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 9</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">10</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> redis配置文件信息
</span><span style="color: #008080;">11</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">12</span>         <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">readonly</span> RedisConfigInfo RedisConfigInfo =<span style="color: #000000;"> RedisConfigInfo.GetConfig();
</span><span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span>         <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> PooledRedisClientManager _prcm;
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">17</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 静态构造方法，初始化链接池管理对象
</span><span style="color: #008080;">18</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">19</span>         <span style="color: #0000ff;">static</span><span style="color: #000000;"> RedisManager()
</span><span style="color: #008080;">20</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">21</span> <span style="color: #000000;">            CreateManager();
</span><span style="color: #008080;">22</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">23</span>         
<span style="color: #008080;">24</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">25</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 创建链接池管理对象
</span><span style="color: #008080;">26</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">27</span>         <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> CreateManager()
</span><span style="color: #008080;">28</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">29</span>             <span style="color: #0000ff;">var</span> writeServerList = SplitString(RedisConfigInfo.WriteServerList, <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">30</span>             <span style="color: #0000ff;">var</span> readServerList = SplitString(RedisConfigInfo.ReadServerList, <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">31</span> 
<span style="color: #008080;">32</span>             _prcm = <span style="color: #0000ff;">new</span><span style="color: #000000;"> PooledRedisClientManager(writeServerList,readServerList,
</span><span style="color: #008080;">33</span>                              <span style="color: #0000ff;">new</span><span style="color: #000000;"> RedisClientManagerConfig
</span><span style="color: #008080;">34</span> <span style="color: #000000;">                             {
</span><span style="color: #008080;">35</span>                                  MaxWritePoolSize =<span style="color: #000000;"> RedisConfigInfo.MaxWritePoolSize,
</span><span style="color: #008080;">36</span>                                  MaxReadPoolSize =<span style="color: #000000;"> RedisConfigInfo.MaxReadPoolSize,
</span><span style="color: #008080;">37</span>                                  AutoStart =<span style="color: #000000;"> RedisConfigInfo.AutoStart,
</span><span style="color: #008080;">38</span> <span style="color: #000000;">                             });
</span><span style="color: #008080;">39</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">40</span> 
<span style="color: #008080;">41</span>         <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> IEnumerable&lt;<span style="color: #0000ff;">string</span>&gt; SplitString(<span style="color: #0000ff;">string</span> strSource, <span style="color: #0000ff;">string</span><span style="color: #000000;"> split)
</span><span style="color: #008080;">42</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">43</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> strSource.Split(split.ToArray());
</span><span style="color: #008080;">44</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">45</span> 
<span style="color: #008080;">46</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">47</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 客户端缓存操作对象
</span><span style="color: #008080;">48</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">49</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> IRedisClient GetClient()
</span><span style="color: #008080;">50</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">51</span>             <span style="color: #0000ff;">if</span> (_prcm == <span style="color: #0000ff;">null</span><span style="color: #000000;">)
</span><span style="color: #008080;">52</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">53</span> <span style="color: #000000;">                CreateManager();
</span><span style="color: #008080;">54</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">55</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> _prcm.GetClient();
</span><span style="color: #008080;">56</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">57</span> 
<span style="color: #008080;">58</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">59</span> }</pre>
</div>
<span class="cnblogs_code_collapse">RedisManager类</span></div>
<p>&nbsp; <span style="color: #258fb8;"><strong><span style="font-size: 18pt;">实战：封装redis对哈希表操作的代码</span></strong></span></p>
<hr>
<p><span style="color: #000000;">&nbsp;　　实战中，我们操作redis最好还是要封装提炼一下的。提炼的目的是为了以后代码的重用。代码封装重用的好处我就不多说了，这个不是本次主要讨论的。下面是我所用项目中分装的代码，其中有的部分我修改过了，贴出来让大家看下。个人感觉不错：^_^</span></p>
<p>&nbsp;　<span style="color: #000000;">　RedisOperatorBase类，是redis操作的基类，继承自IDisposable接口，主要用于释放内存。</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;64c0c4c4-1055-4fe0-a8e5-eba7e962199a&#39;)"><img id="code_img_closed_64c0c4c4-1055-4fe0-a8e5-eba7e962199a" class="code_img_closed" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_64c0c4c4-1055-4fe0-a8e5-eba7e962199a" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;64c0c4c4-1055-4fe0-a8e5-eba7e962199a&#39;,event)" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_64c0c4c4-1055-4fe0-a8e5-eba7e962199a" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System;
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> ServiceStack.Redis;
</span><span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> RedisDemo.Common.Redis.RedisOperator
</span><span style="color: #008080;"> 5</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">abstract</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> RedisOperatorBase : IDisposable
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">protected</span> IRedisClient Redis { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">set</span><span style="color: #000000;">; }
</span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">bool</span> _disposed = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">protected</span><span style="color: #000000;"> RedisOperatorBase()
</span><span style="color: #008080;">11</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">12</span>             Redis =<span style="color: #000000;"> RedisManager.GetClient();
</span><span style="color: #008080;">13</span> <span style="color: #000000;">        }        
</span><span style="color: #008080;">14</span>         <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">virtual</span> <span style="color: #0000ff;">void</span> Dispose(<span style="color: #0000ff;">bool</span><span style="color: #000000;"> disposing)
</span><span style="color: #008080;">15</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">16</span>             <span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span><span style="color: #000000;">._disposed)
</span><span style="color: #008080;">17</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">18</span>                 <span style="color: #0000ff;">if</span><span style="color: #000000;"> (disposing)
</span><span style="color: #008080;">19</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">20</span> <span style="color: #000000;">                    Redis.Dispose();
</span><span style="color: #008080;">21</span>                     Redis = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;">22</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">23</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">24</span>             <span style="color: #0000ff;">this</span>._disposed = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">25</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">26</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> Dispose()
</span><span style="color: #008080;">27</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">28</span>             Dispose(<span style="color: #0000ff;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;">29</span>             GC.SuppressFinalize(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
</span><span style="color: #008080;">30</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">31</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">32</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 保存数据DB文件到硬盘
</span><span style="color: #008080;">33</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">34</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> Save()
</span><span style="color: #008080;">35</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">36</span> <span style="color: #000000;">            Redis.Save();
</span><span style="color: #008080;">37</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">38</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">39</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 异步保存数据DB文件到硬盘
</span><span style="color: #008080;">40</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">41</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> SaveAsync()
</span><span style="color: #008080;">42</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">43</span> <span style="color: #000000;">            Redis.SaveAsync();
</span><span style="color: #008080;">44</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">45</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">46</span> }</pre>
</div>
<span class="cnblogs_code_collapse">RedisOperatorBase 类</span></div>
<p>&nbsp;　　<span style="color: #000000;"> HashOperator类，是操作哈希表类。继承自RedisOperatorBase类，代码中有详细注释，理解起来一目了然。</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;225bfa03-61ec-40ea-9464-11e5e83bc115&#39;)"><img id="code_img_closed_225bfa03-61ec-40ea-9464-11e5e83bc115" class="code_img_closed" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_225bfa03-61ec-40ea-9464-11e5e83bc115" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;225bfa03-61ec-40ea-9464-11e5e83bc115&#39;,event)" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_225bfa03-61ec-40ea-9464-11e5e83bc115" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System;
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Collections.Generic;
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> ServiceStack.Text;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> RedisDemo.Common.Redis.RedisOperator
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> HashOperator : RedisOperatorBase
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">public</span> HashOperator() : <span style="color: #0000ff;">base</span><span style="color: #000000;">() { }
</span><span style="color: #008080;">10</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">11</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 判断某个数据是否已经被缓存
</span><span style="color: #008080;">12</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">13</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">bool</span> Exist&lt;T&gt;(<span style="color: #0000ff;">string</span> hashId, <span style="color: #0000ff;">string</span><span style="color: #000000;"> key)
</span><span style="color: #008080;">14</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">15</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> Redis.HashContainsEntry(hashId, key);
</span><span style="color: #008080;">16</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">17</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">18</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 存储数据到hash表
</span><span style="color: #008080;">19</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">20</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">bool</span> Set&lt;T&gt;(<span style="color: #0000ff;">string</span> hashId, <span style="color: #0000ff;">string</span><span style="color: #000000;"> key, T t)
</span><span style="color: #008080;">21</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">22</span>             <span style="color: #0000ff;">var</span> value = JsonSerializer.SerializeToString&lt;T&gt;<span style="color: #000000;">(t);
</span><span style="color: #008080;">23</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> Redis.SetEntryInHash(hashId, key, value);
</span><span style="color: #008080;">24</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">25</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">26</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 移除hash中的某值
</span><span style="color: #008080;">27</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">28</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">bool</span> Remove(<span style="color: #0000ff;">string</span> hashId, <span style="color: #0000ff;">string</span><span style="color: #000000;"> key)
</span><span style="color: #008080;">29</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">30</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> Redis.RemoveEntryFromHash(hashId, key);
</span><span style="color: #008080;">31</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">32</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">33</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 移除整个hash
</span><span style="color: #008080;">34</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">35</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">bool</span> Remove(<span style="color: #0000ff;">string</span><span style="color: #000000;"> key)
</span><span style="color: #008080;">36</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">37</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> Redis.Remove(key);
</span><span style="color: #008080;">38</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">39</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">40</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 从hash表获取数据
</span><span style="color: #008080;">41</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">42</span>         <span style="color: #0000ff;">public</span> T Get&lt;T&gt;(<span style="color: #0000ff;">string</span> hashId, <span style="color: #0000ff;">string</span><span style="color: #000000;"> key)
</span><span style="color: #008080;">43</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">44</span>             <span style="color: #0000ff;">string</span> value =<span style="color: #000000;"> Redis.GetValueFromHash(hashId, key);
</span><span style="color: #008080;">45</span>             <span style="color: #0000ff;">return</span> JsonSerializer.DeserializeFromString&lt;T&gt;<span style="color: #000000;">(value);
</span><span style="color: #008080;">46</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">47</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">48</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 获取整个hash的数据
</span><span style="color: #008080;">49</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">50</span>         <span style="color: #0000ff;">public</span> List&lt;T&gt; GetAll&lt;T&gt;(<span style="color: #0000ff;">string</span><span style="color: #000000;"> hashId)
</span><span style="color: #008080;">51</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">52</span>             <span style="color: #0000ff;">var</span> result = <span style="color: #0000ff;">new</span> List&lt;T&gt;<span style="color: #000000;">();
</span><span style="color: #008080;">53</span>             <span style="color: #0000ff;">var</span> list =<span style="color: #000000;"> Redis.GetHashValues(hashId);
</span><span style="color: #008080;">54</span>             <span style="color: #0000ff;">if</span> (list != <span style="color: #0000ff;">null</span> &amp;&amp; list.Count &gt; <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">55</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">56</span>                 list.ForEach(x =&gt;
<span style="color: #008080;">57</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">58</span>                     <span style="color: #0000ff;">var</span> value = JsonSerializer.DeserializeFromString&lt;T&gt;<span style="color: #000000;">(x);
</span><span style="color: #008080;">59</span> <span style="color: #000000;">                    result.Add(value);
</span><span style="color: #008080;">60</span> <span style="color: #000000;">                });
</span><span style="color: #008080;">61</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">62</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> result;
</span><span style="color: #008080;">63</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">64</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">65</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 设置缓存过期
</span><span style="color: #008080;">66</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">67</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> SetExpire(<span style="color: #0000ff;">string</span><span style="color: #000000;"> key, DateTime datetime)
</span><span style="color: #008080;">68</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">69</span> <span style="color: #000000;">            Redis.ExpireEntryAt(key, datetime);
</span><span style="color: #008080;">70</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">71</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">72</span> }</pre>
</div>
<span class="cnblogs_code_collapse">HashOperator 类</span></div>
<p>&nbsp;<span style="color: #258fb8;"><strong><span style="font-size: 18pt;">实战：redis<span style="color: #258fb8;"><strong><span style="font-size: 18pt;">操作</span></strong>hash哈希表的增删改查</span></span></strong></span></p>
<hr>
<p>&nbsp;　　<span style="color: #000000;">本来打算这部分把我demo中的操作代码贴出来的，想想，全是代码，看着都烦，还不如讲解一下这部分的操作对应于redis客户端操作命令呢。还有一个原因 就是，上面都已经对hash操作进行了分装，其实如果贴代码也就是调用封装的代码罢了。感觉没啥意思，相信大家都会调用。没啥好讲的。那么接下来我就说 下，上面封装的代码与客户端操作的对应关系。</span></p>
<p><span style="color: #000000;">　　Exist&lt;T&gt;方法：对应于redis操作的hexists。返回字段是否是 key 指定的哈希集中存在的字段。true：存在&nbsp; false：不存在</span></p>
<p><span style="color: #000000;">　　Set&lt;T&gt;方法：对应于redis操作的hget。设置 key 指定的哈希集中指定字段的值。如果 key 指定的哈希集不存在，会创建一个新的哈希集并与 key 关联。如果字段在哈希集中存在，它将被重写。</span></p>
<p><span style="color: #000000;">　 　Remove(string hashId, string key)方法：对应于redis操作的hdel。从 key 指定的哈希集中移除指定的域。在哈希集中不存在的域将被忽略。如果 key 指定的哈希集不存在，它将被认为是一个空的哈希集，该命令将返回false。</span></p>
<p><span style="color: #000000;">　　Remove(string key)方法：对应于redis操作的del。直接删除key。</span></p>
<p><span style="color: #000000;">　　Get&lt;T&gt;方法：对应于redis操作的hget。返回该字段所关联的值。</span></p>
<p><span style="color: #000000;">　　GetAll&lt;T&gt;方法：对应于redis操作的hvals。获取哈希集中的值的列表，当 key 指定的哈希集不存在时返回空列表。</span></p>
<p><span style="color: #000000;">　　SetExpire方法：对应于redis操作的expire。设置缓存过期。</span></p>
<p><span style="color: #258fb8;"><strong><span style="font-size: 18pt;">总结<br></span></strong></span></p>
<hr>
<p>&nbsp;<span style="color: #000000;">　
　redis操作很多很多，其实说是封装，也只是封装其中的一些常用操作。有兴趣的朋友可以用反编译工具去看下源码，就可以知道所有操作对应于redis
操作命令了。其实我个人觉得，使用C#操作redis只是语言需要，我们还是要学习它的客户端操作的。开发中，很多时候调试很慢的，我们可以直接通过
redis客户端操作去找，这样效率会更高一点。而且当操作命令熟练的时候，你会发现，客户端操作比调试操作快很多很多。所以，建议大家多多使用客户端操
作。刚开始会感觉很多需要记，熟能生巧，多操作，自然会很好。</span></p>
<p><span style="color: #000000;">　　在redis学习过程中，希望大神们能不吝赐教。同时也希望和我一样，在研究路上的同仁，有<strong>好的见解</strong>或是<strong>资料</strong>能跟小弟分享下，大家一起探讨学习下。我的QQ联系方式：<strong>296319075&nbsp; </strong>随时联系，备注注明园友就好。大家秉承共同探讨、共同进步！如有转载，请注明出处，谢谢！^_^<strong><br></strong></span></p>
<p><span style="color: #000000;">　　还有，如果大家想要源代码的，可以说下，我会把自己用的放到网盘中或者通过QQ等其他方式发给需要的你。　　</span></p>
<p><span style="color: #000000;">&nbsp;</span></p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory">分类: <a href="http://www.cnblogs.com/mzws/category/637863.html">C# Redis 学习系列</a></div>
<div id="EntryTag">标签: <a href="http://www.cnblogs.com/mzws/tag/C%23%20redis%20%E6%93%8D%E4%BD%9C/">C# redis 操作</a>, <a href="http://www.cnblogs.com/mzws/tag/asp.net%20redis%20%E6%93%8D%E4%BD%9C/">asp.net redis 操作</a></div>
<div id="blog_post_info"><div id="green_channel">
绿色通道：
<a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(4207581,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
<a id="green_channel_follow" onclick="c_follow();" href="javascript:void(0);">关注我</a>
<a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a><a id="green_channel_contact" href="http://msg.cnblogs.com/send/%E5%BC%A0%E6%96%87%E4%B9%A6" target="_blank">与我联系</a>
<a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/icon_weibo_24.png" alt=""></a>
</div>
<div id="author_profile">
<div id="author_profile_info" class="author_profile_info">
<a href="http://home.cnblogs.com/u/mzws/" target="_blank"><img src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/20130522092354.png" class="author_avatar" alt=""></a>
<div id="author_profile_detail" class="author_profile_info">
<a href="http://home.cnblogs.com/u/mzws/">张文书</a><br>
<a href="http://home.cnblogs.com/u/mzws/followees">关注 - 4</a><br>
<a href="http://home.cnblogs.com/u/mzws/followers">粉丝 - 30</a>
</div>
</div>
<div class="clear"></div>
<div id="author_profile_honor"></div>
<div id="author_profile_follow">
    <a href="javascript:void(0);" onclick="c_follow();return false;">+加关注</a>
</div>
</div>
<div id="div_digg">										
    <div class="diggit" onclick="votePost(4207581,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">5</span>
    </div>
	<div class="buryit" onclick="votePost(4207581,&#39;Bury&#39;)"> 
		<span class="burynum" id="bury_count">0</span>
	</div>
	<div class="clear"></div>	
	<div class="diggword" id="digg_tips">
    (请您对文章做出评价)
    </div>	
</div>
</div>
<div class="clear"></div>
<div id="post_next_prev"><a href="http://www.cnblogs.com/mzws/p/redis1.html" class="p_n_p_prefix">« </a> 上一篇：<a href="http://www.cnblogs.com/mzws/p/redis1.html" title="发布于2015-01-02 11:26">C#中使用Redis学习一 windows安装redis服务器端和客户端</a><br><a href="http://www.cnblogs.com/mzws/p/pagging.html" class="p_n_p_prefix">» </a> 下一篇：<a href="http://www.cnblogs.com/mzws/p/pagging.html" title="发布于2015-06-05 16:36">JS 插件开发——Pagging(分页控件)</a><br></div>
</div>


		</div>
		<div class="itemdesc">
			发表于 <span id="post-date">2015-01-07 09:40</span> <a href="http://www.cnblogs.com/mzws/">张文书</a> 阅读(<span id="post_view_count">1353</span>) 评论(<span id="post_comment_count">6</span>)  <a href="http://i.cnblogs.com/EditPosts.aspx?postid=4207581" rel="nofollow">编辑</a> <a href="http://www.cnblogs.com/mzws/p/redis-2.html#" onclick="AddToWz(4207581);return false;">收藏</a>
		</div>
	</div>
	<div class="seperator">&nbsp;</div>
	<script type="text/javascript">var allowComments=true,isLogined=true,cb_blogId=152094,cb_entryId=4207581,cb_blogApp=currentBlogApp,cb_blogUserGuid='c7686520-8caf-e111-aa3f-842b2b196315',cb_entryCreatedDate='2015/1/7 9:40:00';loadViewCount(cb_entryId);</script>
	
</div><a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<div class="post">
<a name="评论"></a>
<div class="moreinfo">
	<div class="moreinfotitle">
		评论
	</div>
	
	
			<div class="comments">
		
			<div class="comment">
				<div class="comment_title">
					<a href="http://www.cnblogs.com/mzws/p/redis-2.html#3101940" class="layer">#1楼</a><a name="3101940" id="comment_anchor_3101940"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3101940,&#39;8MxwUvJxxdwY4M5yeuOJgSEUTLc+BzunM462SnqLc5AI2bunJFIQxg==&#39;)">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3101940,&#39;8MxwUvJxxdwY4M5yeuOJgSEUTLc+BzunM462SnqLc5AI2bunJFIQxg==&#39;)">引用</a></span>
				</div>
				<div class="comment_content"><div id="comment_body_3101940" class="blog_comment_body">LZ引用类库不需要这么麻烦的，<br>install-package ServiceStack.Redis -Version 3.9.71 <br>install-package ServiceStack.Text -Version 3.9.71<br>即可<br><br>interface如果不对 手动替换。<br>另外：也可以直接去GitHub下载3.9.71的全部dll，手动引用。<br><br>注意哦4.0版本的ServiceStack是商业授权，3.9.71是开源免费的。<br>我觉得StackExchange.Redis也不错，推荐</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3101940,&#39;Digg&#39;,this)">支持(1)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3101940,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_3101940_avatar" style="display:none;">http://pic.cnblogs.com/face/452359/20130920132552.png</span></div>
				<div class="comment_footer"><a id="a_comment_author_3101940" href="http://www.cnblogs.com/capqueen/" target="_blank">笋干</a> <a href="http://msg.cnblogs.com/send/%E7%AC%8B%E5%B9%B2" title="发送站内短消息" class="sendMsg2This">&nbsp;</a> 评论于  <span class="comment_date">2015-01-07 13:13</span></div>
			</div>
		
			<div class="comment">
				<div class="comment_title">
					<a href="http://www.cnblogs.com/mzws/p/redis-2.html#3101966" class="layer">#2楼</a><a name="3101966" id="comment_anchor_3101966"></a>[<span class="louzhu">楼主</span>]&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3101966,&#39;MLXEE1ja1d2Yr/JJpP7wnWh1ZHohJt8Jg3LrzDhildQMMluxP+rZhw==&#39;)">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3101966,&#39;MLXEE1ja1d2Yr/JJpP7wnWh1ZHohJt8Jg3LrzDhildQMMluxP+rZhw==&#39;)">引用</a></span>
				</div>
				<div class="comment_content"><div id="comment_body_3101966" class="blog_comment_body"><a href="http://www.cnblogs.com/mzws/p/redis-2.html#3101940" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,3101940);">@</a>笋干<br>嗯，是可以通过命令安装的，但是当时我不知道可以装哪个版本的，所以只能通过Nuget去下载了，降低.NET版本尝试，算是个笨方法了。呵呵，额。。不知道ServiceStack 4.0是商业授权，当时也没有查，还以为是不兼容导致的。感谢提醒。谢谢，我现在用的也是3.9.71.0。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3101966,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3101966,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_3101966_avatar" style="display:none;">http://pic.cnblogs.com/face/416274/20130522092354.png</span></div>
				<div class="comment_footer"><a id="a_comment_author_3101966" href="http://www.cnblogs.com/mzws/" target="_blank">张文书</a> <a href="http://msg.cnblogs.com/send/%E5%BC%A0%E6%96%87%E4%B9%A6" title="发送站内短消息" class="sendMsg2This">&nbsp;</a> 评论于  <span class="comment_date">2015-01-07 13:41</span></div>
			</div>
		
			<div class="comment">
				<div class="comment_title">
					<a href="http://www.cnblogs.com/mzws/p/redis-2.html#3103101" class="layer">#3楼</a><a name="3103101" id="comment_anchor_3103101"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3103101,&#39;A59iTMH3zA0s1JvbsMBarS43GD9ZNjdE5Ni6hsduD3lgU17PI83iOQ==&#39;)">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3103101,&#39;A59iTMH3zA0s1JvbsMBarS43GD9ZNjdE5Ni6hsduD3lgU17PI83iOQ==&#39;)">引用</a></span>
				</div>
				<div class="comment_content"><div id="comment_body_3103101" class="blog_comment_body">不觉明历，学习~\(≧▽≦)/~</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3103101,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3103101,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_3103101_avatar" style="display:none;">http://pic.cnblogs.com/face/532735/20150405110839.png</span></div>
				<div class="comment_footer"><a id="a_comment_author_3103101" href="http://www.cnblogs.com/xz-legendx/" target="_blank">邹烈传</a> <a href="http://msg.cnblogs.com/send/%E9%82%B9%E7%83%88%E4%BC%A0" title="发送站内短消息" class="sendMsg2This">&nbsp;</a> 评论于  <span class="comment_date">2015-01-08 19:43</span></div>
			</div>
		
			<div class="comment">
				<div class="comment_title">
					<a href="http://www.cnblogs.com/mzws/p/redis-2.html#3162119" class="layer">#4楼</a><a name="3162119" id="comment_anchor_3162119"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3162119,&#39;z25W7j5lxA1cYmlpanHYkLptbFfsVFm4csIyRzh9wyuBmTDW/Nl1Yw==&#39;)">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3162119,&#39;z25W7j5lxA1cYmlpanHYkLptbFfsVFm4csIyRzh9wyuBmTDW/Nl1Yw==&#39;)">引用</a></span>
				</div>
				<div class="comment_content"><div id="comment_body_3162119" class="blog_comment_body">谢谢</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3162119,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3162119,&#39;Bury&#39;,this)">反对(0)</a></div></div>
				<div class="comment_footer"><a id="a_comment_author_3162119" href="http://www.cnblogs.com/ljs0109/" target="_blank">ljs0109</a> <a href="http://msg.cnblogs.com/send/ljs0109" title="发送站内短消息" class="sendMsg2This">&nbsp;</a> 评论于  <span class="comment_date">2015-04-14 10:10</span></div>
			</div>
		
			<div class="comment">
				<div class="comment_title">
					<a href="http://www.cnblogs.com/mzws/p/redis-2.html#3256612" class="layer">#5楼</a><a name="3256612" id="comment_anchor_3256612"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3256612,&#39;55eP8GcHJm+EKeHovP8yVyXcEEHQCgA2RWJxComILesvcRKWVIXOeA==&#39;)">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3256612,&#39;55eP8GcHJm+EKeHovP8yVyXcEEHQCgA2RWJxComILesvcRKWVIXOeA==&#39;)">引用</a></span>
				</div>
				<div class="comment_content"><div id="comment_body_3256612" class="blog_comment_body">楼主能不能把代码发我，我参考学习一下</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3256612,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3256612,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_3256612_avatar" style="display:none;">http://pic.cnblogs.com/face/677994/20141026123222.png</span></div>
				<div class="comment_footer"><a id="a_comment_author_3256612" href="http://www.cnblogs.com/liubiao/" target="_blank">寻_Find</a> <a href="http://msg.cnblogs.com/send/%E5%AF%BB_Find" title="发送站内短消息" class="sendMsg2This">&nbsp;</a> 评论于  <span class="comment_date">2015-08-29 14:06</span></div>
			</div>
		
			<div class="comment">
				<div class="comment_title">
					<a href="http://www.cnblogs.com/mzws/p/redis-2.html#3264322" class="layer">#6楼</a><a name="3264322" id="comment_anchor_3264322"></a><span id="comment-maxId" style="display:none;">3264322</span><span id="comment-maxDate" style="display:none;">2015/9/10 17:46:26</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment_actions"><a href="javascript:void(0);" onclick="return ReplyComment(3264322,&#39;7JTIxsHucjc4UW0QlbMWuZL9wPTv7zBjP1UslPR9qorQ+4ZAQgEr+g==&#39;)">回复</a><a href="javascript:void(0);" onclick="return QuoteComment(3264322,&#39;7JTIxsHucjc4UW0QlbMWuZL9wPTv7zBjP1UslPR9qorQ+4ZAQgEr+g==&#39;)">引用</a></span>
				</div>
				<div class="comment_content"><div id="comment_body_3264322" class="blog_comment_body">真的好厉害的感觉，虽然我还是小白，看不太懂。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3264322,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3264322,&#39;Bury&#39;,this)">反对(0)</a></div></div>
				<div class="comment_footer"><a id="a_comment_author_3264322" href="http://www.cnblogs.com/QDF-/" target="_blank">小屈</a> <a href="http://msg.cnblogs.com/send/%E5%B0%8F%E5%B1%88" title="发送站内短消息" class="sendMsg2This">&nbsp;</a> 评论于  <span class="comment_date">2015-09-10 17:46</span></div>
			</div>
		
			</div>
		
</div>
</div>
<div class="seperator">&nbsp;</div>
<div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();">刷新评论</a><a href="http://www.cnblogs.com/mzws/p/redis-2.html#" onclick="return RefreshPage();">刷新页面</a><a href="http://www.cnblogs.com/mzws/p/redis-2.html#top">返回顶部</a></div>
<div id="comment_form_container"><div id="commentform_title">发表评论</div>
<span id="tip_comment" style="color:Red"></span>
<p>
昵称：<input type="text" id="tbCommentAuthor" class="author" disabled="disabled" size="50" value="新建文本文档.txt">
</p>
<div class="commentbox_main">
<div class="commentbox_title">
<div class="commentbox_title_left">评论内容：</div>
<div class="commentbox_title_right">
<img id="ubb_quote" class="comment_icon" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/quote.gif" alt="引用" title="添加引用" onclick="insertUBB(&#39;tbCommentBody&#39;,&#39;quote&#39;)">
<img id="ubb_bold" class="comment_icon" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/b.png" alt="粗体" title="添加粗体" onclick="insertUBB(&#39;tbCommentBody&#39;,&#39;b&#39;)">
<img id="ubb_url" class="comment_icon" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/lk.png" alt="链接" title="添加链接" onclick="insertUbbUrl(&#39;tbCommentBody&#39;)">
<img id="ubb_indent" class="comment_icon" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/indent.png" alt="缩进" title="添加首行缩进" onclick="insertIndent(&#39;tbCommentBody&#39;)">
<img id="ubb_code" class="comment_icon" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/InsertCode.gif" alt="代码" title="添加代码" onclick="insertUbbCode()">
<img id="ubb_img" class="comment_icon" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/img.gif" alt="图片" title="上传图片" onclick="OpenImageUploadWindow();">
</div>
</div>
<div class="clear"></div>
<textarea id="tbCommentBody" class="comment_textarea" rows="20" cols="50"></textarea>
</div>
<p id="commentbox_opt">
<input id="btn_comment_submit" type="button" class="comment_btn" value="提交评论">
<span id="span_comment_canceledit" style="display:none"><a href="javascript:void(0);" onclick="return CancelCommentEdit()">不改了</a></span>
<a href="javascript:void(0);" onclick="return logout();">注销</a>
        <a id="commentbox_opt_sub" href="javascript:void(0);" title="订阅后有新评论时会邮件通知您" onclick="commentManager.Subscribe()">订阅评论</a>
</p>
<div id="tip_comment2" style="color:Red"></div>
<p>
[Ctrl+Enter快捷键提交]
</p>
<div style="display:none">
<span id="comment_edit_id"></span><span id="span_parentcomment_id"></span>
<span id="span_parent_id"></span>
<span id="span_comment_replyto"></span>
<span id="span_comment_posted"></span>
</div>
</div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="site_nav_under"><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><a href="http://www.rongcloud.cn/" target="_blank">【推荐】融云即时通讯云－专注为 App 开发者提供IM云服务</a><br><a href="https://www.jpush.cn/" target="_blank">【推荐】免费集成极光推送SDK，让APP实现高安全、高并发的推送功能</a><br><a href="http://click.aliyun.com/m/1328/" target="_blank">【专享】阿里云9折优惠码：bky901</a><br></div>
<div id="opt_under_post"></div>
<script type="text/javascript">
    var enableGoogleAd = canShowAdsense(); 
    fixPostBodyFormat();
</script>
<div id="google_ad_c1" class="c_ad_block"><object width="300" height="250" data="http://img.cnblogs.com/ad/IBM_Bluemix_C1.swf" type="application/x-shockwave-flash"><param name="src" value="http://img.cnblogs.com/ad/IBM_Bluemix_C1.swf"></object></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="http://news.cnblogs.com/n/529469/" target="_blank">300多热门App感染恶意程序 病毒制造者身份锁定</a><br> ·  <a href="http://news.cnblogs.com/n/529468/" target="_blank">微软向Ahmed送去了Surface Pro 3等高科技产品大礼包</a><br> ·  <a href="http://news.cnblogs.com/n/529467/" target="_blank">微软二代Band手环提前泄密：外观/性能升级</a><br> ·  <a href="http://news.cnblogs.com/n/529466/" target="_blank">张瑞敏：过去十年，海尔在商业模式创新上做了哪些探索？</a><br> ·  <a href="http://news.cnblogs.com/n/529465/" target="_blank">XcodeGhost漏洞事件 会引发苹果信任危机吗？</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="google_ad_c2" class="c_ad_block"><a href="http://e.jikexueyuan.com/html5.html?hmsr=cnb_banner_html5_09.14" target="_blank"><img width="468" height="60" src="./C#中使用Redis学习二 在.NET4.5中使用redis hash操作 - 张文书 - 博客园_files/24442-20150914101329570-406117032.jpg" alt=""></a></div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="http://kb.cnblogs.com/page/529285/" target="_blank">下一代云计算模式：Docker正掀起个性化商业革命</a><br> ·  <a href="http://kb.cnblogs.com/page/528495/" target="_blank">野生程序员的故事</a><br> ·  <a href="http://kb.cnblogs.com/page/528972/" target="_blank">状态机的两种写法</a><br> ·  <a href="http://kb.cnblogs.com/page/528971/" target="_blank">状态机思路在程序设计中的应用</a><br> ·  <a href="http://kb.cnblogs.com/page/528966/" target="_blank">技术系列之“状态机”</a><br></div>» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
$(function () {
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    setTimeout(function () { incrementViewCount(cb_entryId); }, 200);
});
</script>
</div>

                    </div></td>
                </tr>
            </tbody></table>
        </td>
    </tr>
</tbody></table>



</body></html>